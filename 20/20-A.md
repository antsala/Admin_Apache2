# Instalación del servidor.

El servidor Apache se configura mediante archivos. Estos archivos se ubican y cambian de nombre en función de la distribución de Linux utilizada, aunque su finalidad y cometido es la misma.

Por lo tanto, en primer lugar debemos tener en cuenta lo siguiente. 

* Para las distribuciones basadas en Debian/Ubuntu, el directorio principal donde se encuentran estos archivos es `/etc/apache2`.

* Para las basadas en Red Hat/CentOS, el directorio es `/etc/httpd`.


* ***Descargando el código fuente y compilando***: El proceso de compilación es fácil y nos permite personalizar nuestro servidor para que se adapte a nuestras necesidades. Funciona para todas los sistemas operativos, pero requiere bastante tiempo. 

* ***Instalando desde el repositorio de software***: Para implementaciones Linux es la mejor forma de conseguirlo, ya que el instalador dejará configurado al servidor y solo necesitaremos administrar sus archivos de configuración. Esta es la mejor forma de tener Apache funcionando.

* ***Para Windows***: Descargamos el instalador y procedemos a su ejecución.

La instalación en Linux es muy sencilla. Estos los los pasos que debemos realizar en función de nuestra distribución.

## Instalación del servidor Apache en las distribuciones de Linux basadas en Debian/Ubuntu:

Actualiza el índice de del repositiroio de paquetes.

```
sudo apt update
```

Instalamos Apache.

```
sudo apt install apache2
```

Iniciamos el servicio Apache. Observa cómo en esta distribución el servicio es ***apache2***.

```
sudo systemctl start apache2
```

Verificamos la instalación. Para ello simplemente abrimos un navegador web y escribimos la siguiente dirección en la barra de direcciones. 
```
http://localhost
```

Posteriormente debemos configurar Apache, algo que será detallado a lo largo del curso. Por ahora tengamos en cuenta que la ubicación de los archivos de Apache varía en funcíón de la distribución y, por consiguiente debemos saber su ubicación. Para Debian/Ubuntu el archivo de configuración principal está en: `/etc/apache2/apache2.conf`.


## Instalación del servidor Apache en las distribuciones de Linux basadas en Red Hat/CentOS.

Actualizamos el índice de paquetes.

```
sudo yum update
```

Instalamos Apache.

```
sudo yum install httpd
```

Iniciamos el servicio Apache. Observa cómo en esta distribución el servicio es ***httpd***.

```
sudo systemctl start httpd
```

Verificamos la instalación. Para ello simplemente abrimos un navegador web y escribimos la siguiente dirección en la barra de direcciones. 
```
http://localhost
```

El archivo de configuración principal de Apache, para esta distribución, se encuentra en `/etc/httpd/conf/httpd.conf`.

Recuerda que si tienes el firewall de Linux activo, deberás abrir los puertos para que se pueda alcanzar al servidor web.

## Administrar el servicio de Apache en las distribuciones de Linux basadas en Debian/Ubuntu.

Para administrar el servicio, se recomienda usar `systemctl` para las distribuciones de Linux basadas en ***SystemV***, que son las modernas. De esta forma conviene que conozca la forma de interactuar con el servicio, pues cuando apliquemos configuraciones, a menudo, será necesario reiniciarlo.

Para Apache en Debian/Ubuntu, procedemos de la siguiente forma:

Iniciar el servicio Apache.

```
sudo systemctl start apache2
```

Detener el servicio Apache.

```
sudo systemctl stop apache2
```

Reiniciar el servicio Apache.

```
sudo systemctl restart apache2
```

Verificar el estado del servicio Apache.

```
sudo systemctl status apache2
```

Habilitar el servicio Apache para que se inicie automáticamente al arrancar el sistema.

```
sudo systemctl enable apache2
```

Deshabilitar el servicio Apache para que no se inicie automáticamente al arrancar el sistema.

```
sudo systemctl disable apache2
```

Comprobar si el servicio Apache está activo.

```
systemctl is-active apache2
```

Obtener información detallada sobre el servicio Apache.

```
systemctl show apache2
```

## Administrar el servicio de Apache en las distribuciones de Linux basadas en Red Hat/CentOS.

Para esta distribución también es conveniente usar ***systemctl***. La única diferencia es que para ellas, el servicio se llama `httpd` en lugar de `apache2`. 

En consecuencia los comandos son:

Iniciar el servicio Apache.

```
sudo systemctl start httpd
```

Detener el servicio Apache.

```
sudo systemctl stop httpd
```

Reiniciar el servicio Apache.

```
sudo systemctl restart httpd
```

Verificar el estado del servicio Apache.

```
sudo systemctl status httpd
```

Habilitar el servicio Apache para que se inicie automáticamente al arrancar el sistema.

```
sudo systemctl enable httpd
```

Deshabilitar el servicio Apache para que no se inicie automáticamente al arrancar el sistema.

```
sudo systemctl disable httpd
```

Comprobar si el servicio Apache está activo.

```
systemctl is-active httpd
```

Obtener información detallada sobre el servicio Apache.

```
systemctl show httpd
```

[Vamos al siguiente contenido](./20-B.md)