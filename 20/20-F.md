# Variables de entorno en Apache.


La directiva `SetEnv` en Apache se utiliza para definir ***variables de entorno*** que estarán disponibles para el servidor web y las aplicaciones web que se ejecutan en él. 

La sintaxis es: 
```apache
SetEnv VARIABLE valor
```

Donde `VARIABLE` es el nombre de la variable de entorno que deseamos definir y `valor` es el valor que deseamos asignar a la variable de entorno.

Una vez que se define una variable de entorno con `SetEnv`, estará disponible para su uso en toda la configuración de Apache, como en reglas de reescritura de URL, configuración de autenticación, configuración de VirtualHost, etc.

Por ejemplo, podemos definir una variable de entorno llamada `ENVIRONMENT` para indicar el entorno de ejecución de la aplicación web (por ejemplo, `development`, `staging` o `production`)

```apache
SetEnv ENVIRONMENT production
```

Luego, dentro de la configuración de la aplicación web, podemos acceder al valor de esta variable de entorno para ajustar la configuración según el entorno de ejecución deseado. Por ejemplo:

```apache
RewriteEngine On

# Redirigir todas las solicitudes a un archivo específico dependiendo del entorno
RewriteCond %{ENV:ENVIRONMENT} ^development$
RewriteRule ^(.*)$ /development/index.php [L]

RewriteCond %{ENV:ENVIRONMENT} ^production$
RewriteRule ^(.*)$ /production/index.php [L]
```

***RewriteEngine On***: Habilita el motor de reescritura de URL de Apache. Es necesario tener esta directiva activada para que las reglas de reescritura funcionen.

***RewriteCond %{ENV:ENVIRONMENT} ^development$***: Esta directiva establece una condición para aplicar la regla de reescritura siguiente. Verifica si el valor de la variable de entorno `ENVIRONMENT` es igual a `development`. `%{ENV:ENVIRONMENT}` es la sintaxis utilizada para acceder al valor de la variable de entorno `ENVIRONMENT`.
`^development$` es una expresión regular que coincide exactamente con la cadena `development`. 

***RewriteRule ^(.*)$ /development/index.php [L]***: Esta directiva define la regla de reescritura. En este caso, redirige todas las solicitudes a un archivo específico (`/development/index.php`) si la condición anterior se cumple.
`[L]` indica que esta es la última regla de reescritura que se aplicará si se cumple la condición. Significa "Last" (último).

***RewriteCond %{ENV:ENVIRONMENT} ^production$***: Similar a la primera condición, esta línea verifica si el valor de la variable de entorno `ENVIRONMENT` es igual a `production`.

***RewriteRule ^(.*)$ /production/index.php [L]***: Esta regla de reescritura redirige todas las solicitudes a otro archivo (/production/index.php) si la condición se cumple y el entorno es production.


Las ventajas de usar `SetEnv`son:
   
- ***Configuración Dinámica***: Permite configurar dinámicamente el comportamiento del servidor y de las aplicaciones web en función de variables de entorno.

- ***Portabilidad***: Facilita la portabilidad de las aplicaciones web entre diferentes entornos sin necesidad de modificar el código fuente.

- ***Flexibilidad***: Permite personalizar la configuración del servidor y de las aplicaciones web de forma granular y adaptable.


[Vamos al siguiente contenido](./20-G.md)